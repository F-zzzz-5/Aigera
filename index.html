<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Valentine Stories</title>

  <!-- TailwindCSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
    rel="stylesheet"
  />

  <style>
    /* Character fade-in style (initial pink, then black) */
    .fade-in-char {
      color: #ff69b4; /* hot pink */
      transition: color 0.7s ease; /* controls how fast to fade to black */
    }

    /* For story images to fade from 0% opacity to 100% */
    .fade-in-image {
      opacity: 0;
      transition: opacity 1.5s ease;
    }

    /* The story "play" button styling - fixed at bottom middle */
    #playButton {
      position: fixed;
      bottom: 40px; /* adjust as needed */
      left: 50%;
      transform: translateX(-50%);
      display: none; /* hidden until a story finishes */
      z-index: 100;  /* ensure itâ€™s above other elements if needed */
    }
  </style>
</head>
<body class="bg-gray-100 font-sans min-h-screen">

  <!-- **************************
       1) INITIAL VALENTINE MESSAGE
       ************************** -->
  <div
    id="initial-section"
    class="flex flex-col items-center justify-center h-screen text-center"
  >
    <div id="message-container" class="text-3xl font-bold mb-8"></div>

    <!-- "YES" buttons (hidden initially; will be revealed after message finishes) -->
    <div
      id="yesButtonsContainer"
      class="hidden text-center space-x-4"
    >
      <button
        id="yesButton1"
        class="bg-pink-500 hover:bg-pink-700 text-white font-bold py-2 px-6 rounded-full"
      >
        YES
      </button>
      <button
        id="yesButton2"
        class="bg-pink-500 hover:bg-pink-700 text-white font-bold py-2 px-6 rounded-full"
      >
        YES
      </button>
    </div>
  </div>

  <!-- **************************
       2) STORIES SECTION 
       (initially hidden, scrollable by default)
       ************************** -->
  <div
    id="stories-section"
    class="hidden w-full max-w-3xl mx-auto px-4 py-8 space-y-12"
  >
    <!-- Each story displayed here dynamically -->
    <div id="story-container" class="text-center space-y-6">
      <!-- Weâ€™ll inject the story title, text, and image here -->
      <h2 id="story-title" class="text-3xl font-bold"></h2>
      <div id="story-text" class="text-xl"></div>
      <img
        id="story-image"
        src=""
        alt=""
        class="mx-auto fade-in-image"
        style="max-width: 400px;"
      />
    </div>
  </div>

  <!-- **************************
       3) PLAY BUTTON for stories
       ************************** -->
  <button
    id="playButton"
    class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-8 rounded-full"
  >
    Continue
  </button>

  <!-- **************************
       4) COUNTDOWN SECTION (hidden until stories complete)
       ************************** -->
  <div id="countdown-section" class="hidden w-full text-center py-8">
    <h1 class="text-3xl font-bold mb-4 text-red-600">???</h1>
    <div id="countdown" class="text-5xl font-extrabold text-red-600"></div>
  </div>

  <script>
    /********************************************
     * 0) INLINE STORIES JSON-LIKE DATA         *
     ********************************************/
    // Instead of fetch, we can just store the stories directly in an array:
    const storiesData = [
      
      {
        "title": "It's over now. Hehe you'll never know",
        "text": "George Floyd Penis Core",
        "image": "https://ichef.bbci.co.uk/news/1536/cpsprodpb/13278/production/_112565487_floyd.png"
      }
    ];

    /********************************************
     * INITIAL MESSAGE - CHARACTER BY CHARACTER *
     ********************************************/
    const initialMessage = "Hi Aigera, will you be my valentine?";
    const messageContainer = document.getElementById("message-container");
    const yesButtonsContainer = document.getElementById("yesButtonsContainer");

    let charIndex = 0;
    const initialInterval = setInterval(() => {
      if (charIndex < initialMessage.length) {
        const char = initialMessage[charIndex];
        const span = document.createElement("span");
        span.textContent = char;
        span.classList.add("fade-in-char");

        // Add to container
        messageContainer.appendChild(span);

        // Fade to black after a small delay
        setTimeout(() => {
          span.style.color = "#000";
        }, 200);

        charIndex++;
      } else {
        // Entire message displayed
        clearInterval(initialInterval);
        yesButtonsContainer.classList.remove("hidden");
      }
    }, 100); // Adjust typing speed here

    /***********************
     * "YES" => SHOW STORIES
     ***********************/
    const yesClickHandler = () => {
      document.getElementById("initial-section").classList.add("hidden");
      document.getElementById("stories-section").classList.remove("hidden");
      showStory(currentStoryIndex);
    };

    document.getElementById("yesButton1").addEventListener("click", yesClickHandler);
    document.getElementById("yesButton2").addEventListener("click", yesClickHandler);

    /*************************************************************
     * ANIMATE EACH STORY (TEXT & IMAGE) IN SEQUENCE             *
     *************************************************************/
    let currentStoryIndex = 0;
    let storyTextInterval = null;

    const storyTitleEl = document.getElementById("story-title");
    const storyTextEl = document.getElementById("story-text");
    const storyImageEl = document.getElementById("story-image");
    const playButton = document.getElementById("playButton");

    function showStory(index) {
      // Hide the play button so user can't skip mid-animation
      playButton.style.display = "none";

      // Clear existing content
      storyTitleEl.textContent = "";
      storyTextEl.textContent = "";
      storyImageEl.src = "";
      storyImageEl.style.opacity = "0"; // reset fade-in

      const story = storiesData[index];
      if (!story) return;

      // Update title
      storyTitleEl.textContent = story.title;

      // Animate text
      animateStoryText(story.text, () => {
        // After text finishes animating, fade in image
        fadeInStoryImage(story.image);
      });
    }

    function animateStoryText(fullText, onComplete) {
      storyTextEl.innerHTML = ""; // clear old text
      let i = 0;

      storyTextInterval = setInterval(() => {
        if (i < fullText.length) {
          const char = fullText[i];
          const span = document.createElement("span");
          span.textContent = char;
          span.classList.add("fade-in-char");

          storyTextEl.appendChild(span);
          // Fade to black after a short delay
          setTimeout(() => {
            span.style.color = "#000";
          }, 200);

          i++;
        } else {
          clearInterval(storyTextInterval);
          storyTextInterval = null;
          if (onComplete) onComplete();
        }
      }, 50); // text typing speed
    }

    function fadeInStoryImage(imageUrl) {
      storyImageEl.src = imageUrl;
      // Wait a tiny moment so the DOM sees the src, then fade in
      requestAnimationFrame(() => {
        storyImageEl.style.opacity = "1";
      });

      // After fade-in completes (1.5s, matching CSS), show the play button
      setTimeout(() => {
        // Show the "Play Next Story" button
        playButton.style.display = "block";
      }, 1500);
    }

    /*************************************
     * PLAY BUTTON => NEXT STORY or END  *
     *************************************/
    playButton.addEventListener("click", () => {
      // Hide play button while we proceed
      playButton.style.display = "none";

      currentStoryIndex++;
      if (currentStoryIndex < storiesData.length) {
        // Show the next story
        showStory(currentStoryIndex);
      } else {
        // All stories are finished => Show the countdown
        document.getElementById("stories-section").classList.add("hidden");
      }
    });

    /*************************************
     * COUNTDOWN TO MIDNIGHT (IN RED)    *
     *************************************/
    let countdownInterval;
    function startCountdown() {
      const countdownElem = document.getElementById("countdown");
      function updateCountdown() {
        const now = new Date();
        const midnight = new Date(now);
        midnight.setHours(24, 0, 0, 0); // next midnight

        let timeDifference = midnight.getTime() - now.getTime();

        if (timeDifference <= 0) {
          clearInterval(countdownInterval);
          countdownElem.textContent = "00:00:00"; 
          return;
        }

        const hours = Math.floor(
          (timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        const minutes = Math.floor(
          (timeDifference % (1000 * 60 * 60)) / (1000 * 60)
        );
        const seconds = Math.floor(
          (timeDifference % (1000 * 60)) / 1000
        );

        countdownElem.textContent =
          `${hours.toString().padStart(2, '0')}:` +
          `${minutes.toString().padStart(2, '0')}:` +
          `${seconds.toString().padStart(2, '0')} ðŸŒ¹`;
      }

      updateCountdown();
      countdownInterval = setInterval(updateCountdown, 1000);
    }
  </script>
</body>
</html>
